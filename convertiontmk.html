<!DOCTYPE html>
<html>
<head>
	<script>
		var langue = {};
for (i=1; i<300; i++) {
	var prefixe = "";
	if (i<10) {
		prefixe = "00";
    	} else if (i<100) {
    	prefixe = "0";
    	}
	name = "com"+prefixe+i;
	langue[name]= "langue.com"+prefixe+i;
};
for (i=1; i<46; i++) {
	name = "pano"+i;
	langue[name]= "langue.pano"+i;
}
for (i=1; i<53; i++) {
	var prefixe = "";
	if (i<10) {
		prefixe = "00";
    	} else if (i<100) {
    	prefixe = "0";
    	}
	namea = "succest"+prefixe+i;
	nameb = "succesh"+prefixe+i;
	langue[namea]= "langue.succest"+prefixe+i;
	langue[nameb]= "langue.succesh"+prefixe+i;
}
for (i=1; i<29; i++) {
	name = "peche"+i;
	langue[name]= "langue.peche"+i;
}

langue.br= "+langue.br+";
langue.defib= "langue.defib+";
langue.defic= "langue.defic+";
langue.defik= "langue.defik+";
langue.defip= "langue.defip+";
langue.defis= "+langue.defis";

	langue.gyro01= "Gyrocristal Radiant n°14";
    langue.gyro02= "Gyrocristal Radiant n°15";
    langue.gyro03= "Gyrocristal Radiant n°11";
    langue.gyro04= "Gyrocristal Radiant n°4";
    langue.gyro05= "Gyrocristal Radiant n°16";
    langue.gyro06= "Gyrocristal Radiant n°1";
    langue.gyro07= "Gyrocristal Radiant n°3";
    langue.gyro08= "Gyrocristal Radiant n°19";
    langue.gyro09= "Gyrocristal Radiant n°38";
    langue.gyro10= "Gyrocristal Radiant n°39";
    langue.gyro11= "Gyrocristal Radiant n°32";
    langue.gyro12= "Gyrocristal Radiant n°28";
    langue.gyro13= "Gyrocristal Radiant n°34";
    langue.gyro14= "Gyrocristal Radiant n°24";
    langue.gyro15= "Gyrocristal Radiant n°26";
    langue.gyro16= "Gyrocristal Radiant n°27";
    langue.gyro17= "Gyrocristal Radiant n°47";
    langue.gyro18= "Gyrocristal Radiant n°53";
    langue.gyro19= "Gyrocristal Radiant n°54";
    langue.gyro20= "Gyrocristal Radiant n°50";
    langue.gyro21= "Gyrocristal Radiant n°56";
    langue.gyro22= "Gyrocristal Radiant n°52";
    langue.gyro23= "Gyrocristal Radiant n°49";
    langue.gyro24= "Gyrocristal Radiant n°48";
	</script>
	<script type="text/javascript" src="lbm.js"></script>
</head>
<style>
	div#conv1 {
		float: left;
		width: 40%;
		margin-right: 10px;
		padding: 10px;
		background: lightsteelblue;
	}

	div#conv3 {
		float: right;
		width: 40%;
		margin-left: 10px;
		padding: 10px;
		background: skyblue;
	}

	div#conv2 {
		overflow: auto;
		padding: 10px;
		background: steelblue;
	}

	div#result {
		height: 231px;
		width: 1196px;
		border-radius: 2px;
		border: 1px solid black;
		font-family: monospace;
		text-align: left;
		margin: 0px auto 10px;
		padding: 5px;
		overflow-y: auto;
	}
</style>
<body>
	<div align=center style="font-size: larger; font-weight: bold;">OUTIL DE CONVERSION POUR MA MAP</div><br>
	<div align=center>
		<label for="arraytoconv">Array à convertir</label><br><br>
		<textarea id="arraytoconv" rows="10" cols="160" wrap="soft"></textarea><br><br><br>
		<label for="resultconv" style="font-weight: bold;">RESULTAT DE LA CONVERSION</label><br><br></div>
	<div align=center id="result">
		<p id="resultconv"><br><br>
	</div>
<div id="conv1">
<p>Conversion Fichier Markers TMK : </p>

<label for="xval">Décalage X:</label>
<input type="number" id="xval" value="0"><br><br>
<label for="yval">Décalage Y:</label>
<input type="number" id="yval" value="0"><br><br>
<button type="button" id="btn" onclick="conv1()">Convertir</button>
</div>
<div id="conv3">Conversion LBM<br><br>
	<label>GroupId :</label>
	<input type="text" id="groupid">
	<label for="format-select">Format:</label>
	<select name="format" id="grpformat">
		<option value="image" selected>Image</option>
		<option value="video">Vidéo</option>
		<option value="todo">ToDo</option>
	</select><br><br>
	<label>Grp Title :</label>
	<input type="text" id="grouptitle">
	<label for="cbx-select">Checkbox:</label>
	<select name="cbx" id="chkbox">
		<option value="false" selected>Non</option>
		<option value="true">Oui</option>
	</select><br><br>
	<label>ItemId :</label>
	<input type="text" id="itemid">
	<label>Start Nb :</label>
	<input type="number" id="startnb" value="1"><br><br>
<button type="button" id="btn3" onclick="conv3()">Convertir Bloc Simple</button>
<span>&nbsp&nbsp</span>
<button type="button" id="btn4" onclick="conv4()">Convertir Bloc Datas</button>
<span>&nbsp&nbsp</span>
<button type="button" id="btn5" onclick="conv5()">Convertir Fichier LBM Datas</button>
</div>
<div id="conv2">Conversion Bloc entrée<br><br>
<button type="button" id="btn2" onclick="conv2()">Convertir</button>
</div>

<script>

var lstgrp = [
	{listname:'statue', entete:'<br>// Statues des 7<br><br>'},{listname:'teleport', entete:'<br>// Téléporteurs<br><br>'},{listname:'tpbarge', entete:'<br>// Téléporteurs de barge<br><br>'},
    {listname:'elecgate', entete:'<br>// Portail électro<br><br>'},{listname:'peche', entete:'<br>// Spot de Pêche<br><br>'},{listname:'succes', entete:'<br>// Succès<br><br>'},
    {listname:'pano', entete:'<br>// Panoramas<br><br>'},{listname:'panol', entete:'<br>'},{listname:'panoi', entete:'<br>'},
    {listname:'anemo', entete:'<br>// Anémoculus<br><br>'},{listname:'geocul', entete:'<br>// Géoculus<br><br>'},{listname:'eleccul', entete:'<br>// Electroculus<br><br>'},
    {listname:'agate', entete:'<br>// Agates Pourpres<br><br>'},{listname:'sceaugeo', entete:'<br>// Sceaux Géo<br><br>'},{listname:'cordi', entete:'<br>// Coffres Ordinaires<br><br>'},
    {listname:'cordil', entete:'<br>'},{listname:'cordii', entete:'<br>'},{listname:'cdelic', entete:'<br>// Coffres Délicats<br><br>'},
    {listname:'cdelicl', entete:'<br>'},{listname:'cdelici', entete:'<br>'},{listname:'cprec', entete:'<br>// Coffres Précieux<br><br>'},
    {listname:'cprecl', entete:'<br>'},{listname:'cpreci', entete:'<br>'},{listname:'cluxe', entete:'<br>// Coffres Luxueux<br><br>'},
    {listname:'cluxel', entete:'<br>'},{listname:'cluxei', entete:'<br>'},{listname:'cdefi', entete:'<br>// Coffres Défis<br><br>'},
    {listname:'cdefil', entete:'<br>'},{listname:'cdefii', entete:'<br>'},{listname:'cfee', entete:'<br>// Coffres des Fées<br><br>'},
    {listname:'cfeel', entete:'<br>'},{listname:'cfeei', entete:'<br>'},{listname:'cfeee', entete:'<br>'},{listname:'cetr', entete:'<br>// Coffres étranges<br><br>'},
    {listname:'sanctum', entete:'<br>//sanctuaire<br><br>'},{listname:'sanctul', entete:'<br>'},{listname:'sanctui', entete:'<br>'},
    {listname:'betrang', entete:'<br>// Bruto Etrange<br><br>'},{listname:'bgivre', entete:'<br>// Bruto Givré<br><br>'},{listname:'brocheux', entete:'<br>// Bruto Rocheux<br><br>'},
    {listname:'bshaman', entete:'<br>// Bruto Shaman<br><br>'},{listname:'bviandu', entete:'<br>// Brutoviandu<br><br>'},{listname:'fmcryo', entete:'<br>// Fleur mensongère Cryo<br><br>'},
    {listname:'fmpyro', entete:'<br>// Fleur mensongère Pyro<br><br>'},{listname:'chasseur', entete:'<br>// Chasseur des ruines<br><br>'},{listname:'gardien', entete:'<br>// Gardien des ruines<br><br>'},
    {listname:'colosse', entete:'<br>// Colosse des ruines<br><br>'},{listname:'geosaure', entete:'<br>// Géosaure<br><br>'},{listname:'magecryo', entete:'<br>// Cryo Mage<br><br>'},
    {listname:'magehydro', entete:'<br>// Hydro Mage<br><br>'},{listname:'magepyro', entete:'<br>// Pyro Mage<br><br>'},{listname:'magecl', entete:'<br>// Mage Cryoluciole<br><br>'},
    {listname:'mageel', entete:'<br>// Mage Electroluciole<br><br>'},{listname:'frapa', entete:'<br>// Frappeur Anemo<br><br>'},{listname:'frape', entete:'<br>// Frappeur Electro<br><br>'},
    {listname:'mercg', entete:'<br>// Mercenaire Géo<br><br>'},{listname:'mercp', entete:'<br>// Mercenaire Pyro<br><br>'},{listname:'mitrailc', entete:'<br>// Mitrailleur Cryo<br><br>'},
    {listname:'mitrailh', entete:'<br>// Mitrailleur Hydro<br><br>'},{listname:'pilleur', entete:'<br>// Pilleur de Trésor<br><br>'},{listname:'usurier', entete:'<br>// Usurier<br><br>'},
    {listname:'ferblanc', entete:'<br>// Fer Blanc<br><br>'},{listname:'argetoile', entete:'<br>// Minerai d\'argétoile<br><br>'},{listname:'cristal', entete:'<br>// Cristal<br><br>'},
    {listname:'electroc', entete:'<br>// Electrocristal<br><br>'},{listname:'eclatcm', entete:'<br>// Eclat de cristal magique<br><br>'},{listname:'artefact', entete:'<br>// Artéfacts<br><br>'},
    {listname:'dent', entete:'<br>// Dents étranges<br><br>'},{listname:'lapis', entete:'<br>// Coeur de Lapis<br><br>'},{listname:'jade', entete:'<br>// Jade Noctiluque<br><br>'},
    {listname:'noyauc', entete:'<br>// Noyau cristallin<br><br>'},{listname:'perle', entete:'<br>// Perles de loche<br><br>'},{listname:'conque', entete:'<br>// Conque d\'étoile<br><br>'},
    {listname:'amethyste', entete:'<br>// Morceau d\'améthyste<br><br>'},{listname:'ffeu', entete:'<br>// Fleurs de Feu<br><br>'},{listname:'fbrume', entete:'<br>// Fleurs de Brume<br><br>'},
    {listname:'gdloup', entete:'<br>// Gueule de Loup<br><br>'},{listname:'pomme', entete:'<br>// Pommes<br><br>'},{listname:'carotte', entete:'<br>// Carottes<br><br>'},
    {listname:'radis', entete:'<br>// Radis<br><br>'},{listname:'halampe', entete:'<br>// Herbes à lampe<br><br>'},{listname:'chrysantheme', entete:'<br>// Chrysanthème à aubes<br><br>'},
    {listname:'lyscalla', entete:'<br>// Lys calla<br><br>'},{listname:'tombaie', entete:'<br>// Tombaie<br><br>'},{listname:'bacrochet', entete:'<br>// Baie à crochet<br><br>'},
    {listname:'pissenlit', entete:'<br>// Pissenlit<br><br>'},{listname:'cecilia', entete:'<br>// Cécilia<br><br>'},{listname:'chanemo', entete:'<br>// Champignons Anémophiles<br><br>'},
    {listname:'qingxin', entete:'<br>// Qingxin<br><br>'},{listname:'muguet', entete:'<br>// Muguet Bleu<br><br>'},{listname:'piment', entete:'<br>// Piment de Jueyun<br><br>'},
    {listname:'lysverni', entete:'<br>// Lys Verni<br><br>'},{listname:'fsoie', entete:'<br>// Fleur de Soie<br><br>'},{listname:'bambou', entete:'<br>// Pousses de Bambou<br><br>'},
    {listname:'lotus', entete:'<br>// Fruits du Lotus<br><br>'},{listname:'anguille', entete:'<br>// Anguille<br><br>'},{listname:'cfluo',entete:'<br>// Champignon Fluorescent<br><br>'},{listname:'dendro', entete:'<br>// Dendrobium sanglant<br><br>'},
    {listname:'famakumo', entete:'<br>// Fruit d\'Amakumo<br><br>'},{listname:'fcerisier', entete:'<br>// Fleur de cerisier<br><br>'},{listname:'ganoderma', entete:'<br>// Ganoderma marin<br><br>'},
    {listname:'hsanglot', entete:'<br>// Herbe à sanglots<br><br>'},{listname:'herbem', entete:'<br>// Herbe marine<br><br>'},{listname:'melonl', entete:'<br>// Melon Lavande<br><br>'},
    {listname:'moelle', entete:'<br>// Moelle cristalline<br><br>'},{listname:'corail', entete:'<br>// Perle de Corail<br><br>'},{listname:'scarabuto', entete:'<br>// Scarabuto<br><br>'},
    {listname:'grenouille', entete:'<br>// Grenouille<br><br>'},{listname:'lezard', entete:'<br>// Lézard<br><br>'},{listname:'papillon', entete:'<br>// Papillon<br><br>'},
    {listname:'luciole', entete:'<br>// Luciole<br><br>'},{listname:'crabe', entete:'<br>// Crabe<br><br>'}
];
var text = "";
var counter = 1;


function conv1() {
	window['text'] = "// Liste des Marqueurs<br>";
	lstgrp.forEach(function(elem) {
		var numbers = window['list'+elem.listname];
		window['counter'] = 1;
		window['text'] += elem.entete+'var list'+elem.listname+' = [<br>&nbsp&nbsp&nbsp&nbsp';
		numbers.forEach(myFunction);
		window['text'] += '<br>];<br>';
	});
	
	document.getElementById("resultconv").innerHTML = text;
};

function conv2() {
	window['text'] = '';
	var numbers = JSON.parse(document.getElementById("arraytoconv").value);
	// var numbers = [];
	numbers.forEach(myFunction);
	document.getElementById("resultconv").innerHTML = text;
};

function conv3() {
	window['text'] = '';
	window['counter'] = 1;
	var numbers = JSON.parse('['+document.getElementById("arraytoconv").value+']');
	// var numbers = [];
	numbers.forEach(myFunctionLBM);
	document.getElementById("resultconv").innerHTML = text;
	
};

function conv4() {
	window['text'] = '';
	window['counter'] = 1;
	var grpid = document.getElementById("groupid").value;
	var numbers = JSON.parse('['+document.getElementById("arraytoconv").value+']');
	numbers.forEach(myFunctionLBM);
	var grptitle = (document.getElementById("grouptitle").value !== '') ? '\',title:\''+document.getElementById("grouptitle").value : "";
	document.getElementById("resultconv").innerHTML = '{id:\''+grpid+'\',group:'+grpid+'Group,format:\''+document.getElementById("grpformat").value+grptitle+'\',icon:'+grpid+'Icon,checkbox:'+document.getElementById("chkbox").value+',markers:['+text+']}';
};

function conv5() {
	window['text'] = '';
	window['counter'] = 1;
	var grpid = document.getElementById("groupid").value;
	listlbm.forEach(myFunctionLBM);
	var grptitle = (document.getElementById("grouptitle").value !== '') ? '\',title:\''+document.getElementById("grouptitle").value : "";
	document.getElementById("resultconv").innerHTML = '{id:\''+grpid+'\',group:'+grpid+'Group,format:\''+document.getElementById("grpformat").value+grptitle+'\',icon:'+grpid+'Icon,checkbox:'+document.getElementById("chkbox").value+',markers:['+text+']}';
};

function myFunction(item, index, arr) {
// document.getElementById("datas").innerHTML = index +" de "+ arr.length;
var coord = item[1];
var texte ="";
var texte2 ="";
var texte3 ="";
var xshift = Number(document.getElementById("xval").value);
var yshift = Number(document.getElementById("yval").value);
var x = (coord[0] + xshift);
var y = (coord[1] + yshift);
if (x<10000) {x=' '+x};
if (y<10000) {y=' '+y};
if (item[0]==5) {
	var texte = ',"'+item[2]+'"';
	var texte2 = (typeof item[3] !== 'undefined') ? ','+item[3] : "";
	var texte3 = (typeof item[4] !== 'undefined') ? ','+item[4] : "";
} else if (item[0]==12 || item[0]==11) {
    var texte = (typeof item[2] !== 'undefined') ? ',"'+item[2]+'"' : "";
} else {
	var texte2 = (typeof item[2] !== 'undefined') ? ','+item[2] : "";
	var texte3 = (typeof item[3] !== 'undefined') ? ','+item[3] : "";
};
var result = (index+1 !== arr.length) ? '['+item[0]+',['+x+','+y+']'+texte+texte2+texte3+'],' : '['+item[0]+',['+x+","+y+']'+texte+texte2+texte3+"]";
if (counter == 10 && index+1 !== arr.length) {
	result +='<br>&nbsp&nbsp&nbsp&nbsp';
    counter = 0;
    }
counter +=1;
text += result;
}

function myFunctionLBM(item, index, arr) {
	var coord = item[1];
	var texte = "";
	var start = Number(document.getElementById("startnb").value);
	var rang = ((start+index) < 10) ? "0"+(start+index) : start+index;
	var x = Math.trunc (coord[0]/4);
	var y = Math.trunc (coord[1]/4);

	if (item[0] == 0) formatm = 'image';
	if (item[0] == 3) formatm = 'gif';
	if (item[0] == 5) formatm = 'video';
	if (item[0] == 7) formatm = 'todo';

	// var formatm = (item[0] == 0) ? 'image' : 'video';
	// if (item[0]==12 || item[0]==11) {
    // 	var texte = (typeof item[2] !== 'undefined') ? ',"'+item[2]+'"' : "";
	// }
	var formattxt = (formatm == document.getElementById("grpformat").value) ? "" : ',format:\''+formatm+'\'';
	var texte1 = (item[0] == 5 && typeof item[3] !== 'undefined') ? ',text:\''+item[3]+'\'' : "";
	var texte2 = (item[0] == 0 && typeof item[2] !== 'undefined') ? ',text:\''+item[2]+'\'' : "";
	var refYT = (item[0] == 5) ? ',video:\''+item[2]+'\'' : "";
	var result = (index+1 !== arr.length) ? '{id:\''+document.getElementById("itemid").value+rang+'\',coords:['+x+','+y+']'+formattxt+refYT+texte1+texte2+'},' : '{id:\''+document.getElementById("itemid").value+rang+'\',coords:['+x+','+y+']'+formattxt+refYT+texte1+texte2+'}';
// 	if (counter == 10 && index+1 !== arr.length) {
// 		result +='<br>&nbsp&nbsp&nbsp&nbsp';
//     	counter = 0;
//     }
// counter +=1;
text += result;}
</script>

</body>
</html>
